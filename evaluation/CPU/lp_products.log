mkdir -p ./build
g++ -std=c++11 -O3 -I/opt/intel/oneapi/mkl/2022.0.2/include \
                -Wl,--no-as-needed \
                mkl_spgemm_lp.cpp -o ./build/mkl_spgemm_lp \
                -Wl,--start-group /opt/intel/oneapi/mkl/2022.0.2/lib/intel64/libmkl_intel_lp64.a \
                /opt/intel/oneapi/mkl/2022.0.2/lib/intel64/libmkl_core.a /opt/intel/oneapi/mkl/2022.0.2/lib/intel64/libmkl_gnu_thread.a -Wl,--end-group \
                -fopenmp -lpthread -lm -ldl
mkdir -p ./build
g++ -std=c++11 -O3 -I/opt/intel/oneapi/mkl/2022.0.2/include \
	-Wl,--no-as-needed \
	mkl_spmm.cpp -o ./build/mkl_spmm \
	-Wl,--start-group /opt/intel/oneapi/mkl/2022.0.2/lib/intel64/libmkl_intel_lp64.a \
	/opt/intel/oneapi/mkl/2022.0.2/lib/intel64/libmkl_core.a /opt/intel/oneapi/mkl/2022.0.2/lib/intel64/libmkl_gnu_thread.a -Wl,--end-group \
	-fopenmp -lpthread -lm -ldl
./build/mkl_spgemm_lp products_label_matrix_1.mtx
filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_adj_matrix_row_major.mtx
read MTX filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_adj_matrix_row_major.mtx
filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_label_matrix_1.mtx
read MTX filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_label_matrix_1.mtx
total time: 0.819183s
average_time = 819.183 ms
The tested ops is 67435874
output nnz is 3886898
./build/mkl_spgemm_lp products_label_matrix_2.mtx
filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_adj_matrix_row_major.mtx
read MTX filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_adj_matrix_row_major.mtx
filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_label_matrix_2.mtx
read MTX filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_label_matrix_2.mtx
total time: 4.093300s
average_time = 4093.3 ms
The tested ops is 764860704
output nnz is 25685288
./build/mkl_spgemm_lp products_label_matrix_3.mtx
filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_adj_matrix_row_major.mtx
read MTX filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_adj_matrix_row_major.mtx
filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_label_matrix_3.mtx
read MTX filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_label_matrix_3.mtx
total time: 6.566675s
average_time = 6566.68 ms
The tested ops is 4104191118
output nnz is 60053012
./build/mkl_spgemm_lp products_label_matrix_4.mtx
filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_adj_matrix_row_major.mtx
read MTX filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_adj_matrix_row_major.mtx
filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_label_matrix_4.mtx
read MTX filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_label_matrix_4.mtx
total time: 10.190432s
average_time = 10190.4 ms
The tested ops is 7533923970
output nnz is 84075438
./build/mkl_spmm products_adj_matrix_row_major.mtx
filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_adj_matrix_row_major.mtx
read MTX filename /work/shared/common/datasets/versatile_sparse_xcel/lp/products_adj_matrix_row_major.mtx
average_time = 2000.33 ms
THROUGHPUT = 5.81381 GOPS
